<!DOCTYPE html>
<html>

<head>

    <title>Registration Form Using jQuery - Demo Preview</title>
    <meta name="robots" content="noindex, nofollow">
    <!-- Include CSS File Here -->

</head>

<body>

    <div class="container">
        <div class="main">
            <form class="form" method="post" action="#">
                <h2>Sign Up With Email</h2>
                <label>Email :</label>
                <input type="text" name="email" id="email" placeholder="Email">
                <label>First Name :</label>
                <input type="text" name="fname" id="fname" placeholder="First Name">
                <label>Last Name :</label>
                <input type="text" name="lname" id="lname" placeholder="Last Name">
                <label>Password :</label>
                <input type="password" name="password" id="password" placeholder="Password">
                <label>Date Of Birth :</label>
                <div class="date">

                    <input id="day" name="day" />
                    <input id="month" name="month" />
                    <input id="year" name="year" />
                </div>
                <input type="button" name="SignUp" id="SignUp" value="SignUp" onclick="register()">
            </form>
        </div>

        <!-- The core Firebase JS SDK is always required and must be listed first -->
        <script src="https://www.gstatic.com/firebasejs/7.5.0/firebase.js"></script>

        <!-- TODO: Add SDKs for Firebase products that you want to use
     https://firebase.google.com/docs/web/setup#available-libraries -->
        <!-- <script src="https://www.gstatic.com/firebasejs/7.5.0/firebase-analytics.js"></script> -->

        <script>
            // Your web app's Firebase configuration
            var firebaseConfig = {
                apiKey: "AIzaSyCiqITMCVsyHKwdbDgFCowNRwLsfLqiYOY",
                authDomain: "train-cde96.firebaseapp.com",
                databaseURL: "https://train-cde96.firebaseio.com",
                projectId: "train-cde96",
                storageBucket: "train-cde96.appspot.com",
                messagingSenderId: "45911183152",
                appId: "1:45911183152:web:b27375f04a3b109b5442f5",
                measurementId: "G-B29GE7SWEX"
            };
            // Initialize Firebase
            firebase.initializeApp(firebaseConfig);
            firebase.database();
        </script>
        <!-- The core Firebase JS SDK is always required and must be listed first -->

        <script>
            function register() {

                var email = document.getElementById("email").value;
                var fname = document.getElementById("fname").value;
                var lname = document.getElementById("lname").value;
                var password = document.getElementById("password").value;

                firebase.auth().createUserWithEmailAndPassword(email, password).then(function(e) {
                    console.log(e);
                    // document.cookie = "uid=" + e.user.uid;
                    firebase.database().ref('users/' + e.user.uid).set({
                        email: email,
                        fname: fname,
                        lname: lname
                    });

                    /////////////////////// add fav
                    firebase.database().ref('users/' + e.user.uid + '/favourites').set({
                        locationId: 'locationId'
                    });


                    alert("success");
                }).catch(function(error) {
                    // Handle Errors here.
                    var errorCode = error.code;
                    var errorMessage = error.message;
                    console.log(errorMessage);
                });

            }




            //////////////////////////////////////////////////////
            function setCookie(cname, cvalue, exdays) {
                var d = new Date();
                d.setTime(d.getTime() + (exdays * 24 * 60 * 60 * 1000));
                var expires = "expires=" + d.toGMTString();
                document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/";
            }

            function getCookie(cname) {
                var name = cname + "=";
                var decodedCookie = decodeURIComponent(document.cookie);
                var ca = decodedCookie.split(';');
                for (var i = 0; i < ca.length; i++) {
                    var c = ca[i];
                    while (c.charAt(0) == ' ') {
                        c = c.substring(1);
                    }
                    if (c.indexOf(name) == 0) {
                        return c.substring(name.length, c.length);
                    }
                }
                return "";
            }

            function checkCookie() {
                var user = getCookie("username");
                if (user != "") {
                    alert("Welcome again " + user);
                } else {
                    user = prompt("Please enter your name:", "");
                    if (user != "" && user != null) {
                        setCookie("username", user, 30);
                    }
                }
            }
        </script>

</body>

</html>